pip install paho-mqtt

import paho.mqtt.client as mqtt
import random
import time


#first of all convert mm evapo from Penman to time we need to water-------- 
mm_evapo=penm

x=1       #just example for convert factor--->complate after entire day with mesurment

time_on=mm_evapo*x# time in second

#now publish the time on and time of by mqtt---------------------------------

# MQTT broker details
broker_address = "broker.hivemq.com"
broker_port = 1883

# Create a MQTT client instance
client = mqtt.Client()

# Connect to the MQTT broker
client.connect(broker_address, broker_port, 60)

for i in range(0,3):
  # Publish 'on' to indicate the code has started
  client.publish("agrotech/2023/control", "open")
  print("Published status: on")
  time.sleep(3)
# Wait for the defined time delay
time.sleep(time_on)

for i in range(0,3):

  # Publish 'off' after the time delay
  client.publish("agrotech/2023/control", "close")
  print("Published status: off")
  time.sleep(3)

# Disconnect from the MQTT broker (not reached in this example)
client.disconnect()


